<?xml version="1.0"?>
<project name="Javadoc" default="runJavadoc" basedir=".">
	
    <target name="runJavadoc" depends="chkPropsJavadoc, failJavadoc" unless="missingPropJavadoc">
        <echo message="Compiling Javadoc..."/>
        <antcall target="javadoc" />
    </target>

    <target name="chkPropsJavadoc">
        <property name="chk0" value="$${javadoc_dest}"/>
        <condition property="missingPropJavadoc">
            <or>
                <equals arg1="${chk0}" arg2="${javadoc_dest}"/>
                <equals arg1="" arg2="${javadoc_dest}"/>
            </or>
        </condition>
    </target>
    
    <target name="failJavadoc" if="missingPropJavadoc">
        <fail message="missing property(ies) : javadoc_dest"/>
    </target>
    	
    <import file="classpath.xml" />

    <path id="JMetadata.source">
		<pathelement location="JMetadata/javasource/" />
	</path>


	<target name="javadoc">
        <delete dir="${javadoc_dest}" />
        <mkdir dir="${javadoc_dest}" />
	    <javadoc destdir="${javadoc_dest}" 
			author="true" 
			version="true" 
			use="true" 
			windowtitle="JMetadata" 
			source="1.7" 
			linksource="false" 
			classpathref="JMetadata.classpath"
			sourcepathref="JMetadata.source"
			packagenames="aka/**/*.*"
			breakiterator="true" 
			private="true" >

			<doctitle><![CDATA[<h1>SharePlot ${version}</h1>]]></doctitle>
			<bottom><![CDATA[<i>Copyright &#169; 2011 InveO sprl. All Rights Reserved.</i>]]></bottom>
			<header><![CDATA[<b>SharePlot</b><br>v${version}]]></header>
			<link href="http://download.oracle.com/javase/7/docs/api/" />
		</javadoc>
	</target>

</project>